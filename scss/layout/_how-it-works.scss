@use '../base/variables' as v;

.how-it-works {
    padding: 6rem 2rem;
    background: linear-gradient(
        180deg,
        v.$color-dark 0%,
        v.$color-bg 100%
    );
}

/* ---------- Header ---------- */
.how-it-works__header {
    text-align: center;
    margin-bottom: 4rem;
    font-size: v.$fs-2xl;
    color: v.$color-text-primary;
    font-family: v.$font-heading;
    font-weight: v.$fw-bold;
    line-height: 1.4;
    margin-bottom: 3rem;

    .hiw-eyebrow {
        font-size: v.$fs-sm;
        font-family: v.$font-primary;
        font-weight: v.$fw-medium;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: v.$color-primary;
        margin-bottom: 1rem;
    }

    .hiw-heading {
        font-family: v.$font-heading;
        font-size: v.$fs-3xl;
        font-weight: v.$fw-bold;
        color: v.$color-text-primary;
    }
}

/* ---------- Timeline wrapper ---------- */
.steps {
    position: relative;
    max-width: 600px;
    margin: 0 auto;
    padding-left: 3.5rem;
    z-index: 1;
    margin-bottom: 2rem;
}

/* Línea base */
.steps::before {
    content: '';
    position: absolute;
    top: 0;
    left: 22px;
    width: 2px;
    height: 100%;
    background: v.$color-border;
}

/* Línea de progreso (scroll-driven) */
.steps::after {
    content: '';
    position: absolute;
    top: 0;
    left: 22px;
    width: 2px;
    height: 0;
    background: v.$color-primary;
    transition: height v.$transition-base;
}

/* ---------- Step ---------- */
.step {
    position: relative;
    padding: 2rem 1.5rem 2rem 3.5rem;
    border: 2px solid v.$color-border;
    border-radius: v.$radius-lg;
    margin-bottom: 2rem;
    opacity: 0;
    transform: translateY(40px);
    transition:
        opacity v.$transition-base,
        transform v.$transition-slow,
        border-color v.$transition-base,
        box-shadow v.$transition-base;

    &.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

    &.is-active {
        border-color: v.$color-primary;
        box-shadow: 0 8px 24px rgba(0, 198, 248, 0.15);
    }
}

/* Punto en la línea */
.step::before {
    content: '';
    position: absolute;
    top: 2.2rem;
    left: -3.6rem;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: v.$color-border;
    transition:
        background v.$transition-base,
        box-shadow v.$transition-base;
}

.step.is-active::before {
    background: v.$color-primary;
    box-shadow: 0 0 0 4px rgba(0, 198, 248, 0.2);
}

/* ---------- Index (contador) ---------- */
.step__index {
    font-family: v.$font-heading;
    font-size: 2.75rem;
    font-weight: v.$fw-bold;
    color: rgba(2, 255, 242, 0.2);
    margin-bottom: 0.5rem;
}

/* ---------- Media ---------- */
.step__media {
    margin-bottom: 1rem;    

    img {
        width: 48px;
        height: 48px;
    }
}

/* ---------- Content ---------- */
.step__content h3 {
    font-family: v.$font-heading;
    font-size: v.$fs-xl;
    font-weight: v.$fw-bold;
    color: v.$color-text-primary;
    margin-bottom: 0.5rem;
}

.step__content p {
    font-family: v.$font-primary;
    font-size: v.$fs-sm;
    font-weight: v.$fw-regular;
    color: v.$color-text-secondary;
}

/* ---------- Mobile ---------- */
@media (max-width: 768px) {
    .steps {
        padding-left: 2.5rem;
    }

    .step::before {
        left: -2.6rem;
    }
}
